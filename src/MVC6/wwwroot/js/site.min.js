"use strict";var PhotoSwipeLoad;!function(t){var e=function(){function t(t,e,i){var o=this;this.gid=t,this.galleryOptions=e,this.callback=i,this.EphotoGalleryPhotoSizes={240:"m",320:"n",640:"z",800:"c",1024:"b",1600:"h",2048:"k",2400:"o"},this.currentSize=parseInt(Object.keys(this.EphotoGalleryPhotoSizes)[0],10),this.firstResize=!0,this.initGalleryWithCallback=function(t){return t=t||function(){},o.EphotoGalleryData&&o.galleryOptions?(o.gallery||o.initGallery(o.EphotoGalleryData,o.galleryOptions),void t(o.gallery)):"You have to initialize everything."},this.initGallery=function(t,e){var i=document.querySelectorAll(".pswp")[0],a=new PhotoSwipe(i,PhotoSwipeUI_Default,t,e);a.listen("beforeResize",function(){var t=0,e=!1,i=a.viewportSize.x*window.devicePixelRatio;for(var r in o.EphotoGalleryPhotoSizes)i>r&&(t=parseInt(r,10));o.currentSize<t&&(e=!0,o.currentSize=t),e&&!o.firstResize&&a.invalidateCurrItems(),o.firstResize=!1}),a.listen("gettingData",function(t,e){var i=o.EphotoGalleryPhotoSizes[o.currentSize];e.src=e.sizeData[i].src||e.o.src,e.w=e.sizeData[i].w||e.o.w,e.h=e.sizeData[i].h||e.o.h}),a.listen("destroy",function(){o.gallery=void 0}),o.gallery=a},this.init=function(){var t=o.EphotoGalleryPhotoSizes;if(o.galleryOptions=o.galleryOptions||{},"getImageURLForShare"in o.galleryOptions||(o.galleryOptions.getImageURLForShare=function(t){return this.gallery.currItem.original_src||this.gallery.currItem.src||""}),o.callback=o.callback||function(){},o.EphotoGalleryData)o.initGallery(o.EphotoGalleryData,o.galleryOptions),o.callback(o.gallery);else{var e="Data/"+(o.gid||1).toString();$.get(e,function(e){var i,a=[];for(i in e){var r,l,n=e[i],s={src:"",w:0,h:0,sizeData:{}};for(r in t){l=t[r];var h=n.heightRatio<=1?parseFloat(r):parseFloat(r)*n.heightRatio,c=n.heightRatio>1?parseFloat(r):parseFloat(r)*n.heightRatio;s.sizeData[l]={src:n.uri.replace("_o","_"+l),w:h,h:c},s.original_src=n.uri.replace("_o","")}a.push(s)}o.EphotoGalleryData=a,o.initGallery(o.EphotoGalleryData,o.galleryOptions),o.callback(o.gallery)})}},this.init()}return t}();t.PhotoSwipeLoad=e}(PhotoSwipeLoad||(PhotoSwipeLoad={}));var PhotoSwipeRun;!function(t){var e=function(){function t(){this.onload=function(){var t,e=[],i=document.URL.split("#")[1];if(void 0!=i)for(var o=i.split("&"),a=0;a<o.length;a++)t=o[a].split("="),e.push(t[1]),e[t[0]]=t[1];var r,l=e.gid?e.gid:"1",n=document.getElementById("reopenGallery"),s={index:0,counterEl:!1},h=new PhotoSwipeLoad.PhotoSwipeLoad(l,s,r);n.addEventListener("click",function(){h.initGalleryWithCallback(r)})},"loading"!=document.readyState?this.onload():document.addEventListener("DOMContentLoaded",this.onload)}return t}();t.PhotoSwipeRun=e}(PhotoSwipeRun||(PhotoSwipeRun={})),new PhotoSwipeRun.PhotoSwipeRun;