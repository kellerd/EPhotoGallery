"use strict";var PhotoSwipeLoad;!function(t){var e=function(){function t(t,e,a){var o=this;this.gid=t,this.galleryOptions=e,this.callback=a,this.EphotoGalleryPhotoSizes={240:"m",320:"n",640:"z",800:"c",1024:"b",1600:"h",2048:"k",2400:"o"},this.currentSize=parseInt(Object.keys(this.EphotoGalleryPhotoSizes)[0],10),this.firstResize=!0,this.initGalleryWithCallback=function(t){return t=t||function(){},o.EphotoGalleryData&&o.galleryOptions?(o.gallery||o.initGallery(o.EphotoGalleryData,o.galleryOptions),void t(o.gallery)):"You have to initialize everything."},this.loadMoreCallback=function(t){t.preventDefault(),t.stopPropagation();var e=$("#loadMore"),a=$("#moreContent"),i=e.get(0).href,r=a.prev();$.get(i,function(t){a.replaceWith(t)}).then(function(t,e,a){var i=((o.gallery?o.gallery.items:o.EphotoGalleryData)||[]).length;for(r=0==r.length?$(".my-gallery").children().first():r.next();void 0!=r.get(0);r=r.next()){var l=o,n=r.children("a");n.on("click",function(t){t.preventDefault(),t.stopPropagation();var e=this.parentNode.attributes.getNamedItem("data-pswp-uid").value;l.gallery||(l.galleryOptions.index=e,l.initGallery(l.EphotoGalleryData,l.galleryOptions),l.callback(l.gallery)),l.gallery.invalidateCurrItems(),l.gallery.goTo(parseInt(e))});var s=n.data("size");if(s){r.attr("data-pswp-uid",i++);var h,c,p=n.data("size").split("x"),u=parseFloat(p[1])/parseFloat(p[0]),d={src:"",w:0,h:0,sizeData:{}},g=o.EphotoGalleryPhotoSizes;for(h in g){c=g[h];var y=n.children("img").get(0),f=1>=u?parseFloat(h):parseFloat(h)*u,v=u>1?parseFloat(h):parseFloat(h)*u;d.sizeData[c]={src:y.src.replace("m_",c+"_"),w:f,h:v},d.original_src=n.get(0).href.replace("o_","")}o.EphotoGalleryData.push(d)}}$("#loadMore").on("click",o.loadMoreCallback)})},this.initGallery=function(t,e){var a=document.querySelectorAll(".pswp")[0],i=new PhotoSwipe(a,PhotoSwipeUI_Default,t,e);i.listen("beforeResize",function(){var t=0,e=!1,a=i.viewportSize.x*window.devicePixelRatio;for(var r in o.EphotoGalleryPhotoSizes)a>r&&(t=parseInt(r,10));o.currentSize<t&&(e=!0,o.currentSize=t),e&&!o.firstResize&&i.invalidateCurrItems(),o.firstResize=!1}),i.listen("gettingData",function(t,e){var a=o.EphotoGalleryPhotoSizes[o.currentSize];e.src=e.sizeData[a].src||e.o.src,e.w=e.sizeData[a].w||e.o.w,e.h=e.sizeData[a].h||e.o.h}),i.listen("destroy",function(){o.gallery=void 0}),o.gallery=i},this.init=function(){o.galleryOptions=o.galleryOptions||{},"getImageURLForShare"in o.galleryOptions||(o.galleryOptions.getImageURLForShare=function(t){return this.gallery.currItem.original_src||this.gallery.currItem.src||""}),o.callback=o.callback||function(){},$("#loadMore").on("click",o.loadMoreCallback),o.EphotoGalleryData||(o.EphotoGalleryData=[],$("#loadMore").click())},this.init()}return t}();t.PhotoSwipeLoad=e}(PhotoSwipeLoad||(PhotoSwipeLoad={}));var PhotoSwipeRun;!function(t){var e=function(){function t(){this.onload=function(){var t,e=[],a=document.URL.split("#")[1];if(void 0!=a)for(var o=a.split("&"),i=0;i<o.length;i++)t=o[i].split("="),e.push(t[1]),e[t[0]]=t[1];{var r=e.gid?e.gid:"1",l={index:0,counterEl:!1},n=function(t){t.init()};new PhotoSwipeLoad.PhotoSwipeLoad(r,l,n)}},"loading"!=document.readyState?this.onload():document.addEventListener("DOMContentLoaded",this.onload)}return t}();t.PhotoSwipeRun=e}(PhotoSwipeRun||(PhotoSwipeRun={})),new PhotoSwipeRun.PhotoSwipeRun;