"use strict";var PhotoSwipeLoad;!function(t){var i=function(){function t(t,i,e){var o=this;this.pid=t,this.galleryOptions=i,this.callback=e,this.EphotoGalleryPhotoSizes={240:"m",320:"n",640:"z",800:"c",1024:"b",1600:"h",2048:"k",2400:"o"},this.currentSize=parseInt(Object.keys(this.EphotoGalleryPhotoSizes)[0],10),this.firstResize=!0,this.initGalleryWithCallback=function(t){return t=t||function(){},o.EphotoGalleryData&&o.galleryOptions?(o.gallery||o.initGallery(o.EphotoGalleryData,o.galleryOptions),void t(o.gallery)):"You have to initialize everything."},this.initGallery=function(t,i){var e=document.querySelectorAll(".pswp")[0],a=new PhotoSwipe(e,PhotoSwipeUI_Default,t,i);a.listen("beforeResize",function(){var t=0,i=!1,e=a.viewportSize.x*window.devicePixelRatio;for(var o in this.EphotoGalleryPhotoSizes)e>o&&(t=parseInt(o,10));this.currentSize<t&&(i=!0,this.currentSize=t),i&&!this.firstResize&&a.invalidateCurrItems(),this.firstResize=!1}),a.listen("gettingData",function(t,i){var e=this.EphotoGalleryPhotoSizes[this.currentSize];i.src=i.sizeData[e].src||i.o.src,i.w=i.sizeData[e].w||i.o.w,i.h=i.sizeData[e].h||i.o.h}),a.listen("destroy",function(){this.gallery=void 0}),o.gallery=a},this.init()}return t.prototype.init=function(){var t=this.EphotoGalleryPhotoSizes;if(this.galleryOptions=this.galleryOptions||{},"getImageURLForShare"in this.galleryOptions||(this.galleryOptions.getImageURLForShare=function(t){return this.gallery.currItem.original_src||this.gallery.currItem.src||""}),this.callback=this.callback||function(){},this.EphotoGalleryData)this.initGallery(this.EphotoGalleryData,this.galleryOptions),this.callback(this.gallery);else{var i="Data/"+(this.pid||1).toString();$.get(i,function(i){var e,o=[];for(e in i){var a,r,l=i[e],n={src:"",w:0,h:0,sizeData:{}};for(a in t){r=t[a];var s=l.heightRatio<=1?parseFloat(a):parseFloat(a)*l.heightRatio,h=l.heightRatio>1?parseFloat(a):parseFloat(a)*l.heightRatio;n.sizeData[r]={src:l.uri.replace("_o","_"+r),w:s,h:h},n.original_src=l.uri.replace("_o","")}o.push(n)}this.EphotoGalleryData=o,this.initGallery(this.EphotoGalleryData,this.galleryOptions),this.callback(this.gallery)})}},t}();t.PhotoSwipeLoad=i}(PhotoSwipeLoad||(PhotoSwipeLoad={}));var PhotoSwipeRun;!function(t){var i=function(){function t(){this.onload=function(){var t,i=[],e=document.URL.split("?")[1];if(void 0!=e)for(var o=e.split("&"),a=0;a<o.length;a++)t=o[a].split("="),i.push(t[1]),i[t[0]]=t[1];var r,l=i.pid?i.pid:"1",n=document.getElementById("reopenGallery"),s={index:0,counterEl:!1},h=function(t){t.listen("close",function(){r=t.getCurrentIndex()}),t.init(),r&&t.goTo(r),n.style.display=""},c=new PhotoSwipeLoad.PhotoSwipeLoad(l,s,h);n.addEventListener("click",function(){c.initGalleryWithCallback(h)})},"loading"!=document.readyState?this.onload():document.addEventListener("DOMContentLoaded",this.onload)}return t}();t.PhotoSwipeRun=i}(PhotoSwipeRun||(PhotoSwipeRun={})),new PhotoSwipeRun.PhotoSwipeRun;