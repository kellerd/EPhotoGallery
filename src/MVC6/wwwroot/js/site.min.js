var initPhotoSwipeFromDOM=function(t){for(var e=function(t){for(var e,i,n,o,r=t.childNodes,a=r.length,l=[],s=0;a>s;s++)e=r[s],1===e.nodeType&&(i=e.children[0],n=i.getAttribute("data-size").split("x"),o={src:i.getAttribute("href"),w:parseInt(n[0],10),h:parseInt(n[1],10)},e.children.length>1&&(o.title=e.children[1].innerHTML),i.children.length>0&&(o.msrc=i.children[0].getAttribute("src")),o.el=e,l.push(o));return l},i=function u(t,e){return t&&(e(t)?t:u(t.parentNode,e))},n=function(t){t=t||window.event,t.preventDefault?t.preventDefault():t.returnValue=!1;var e=t.target||t.srcElement,n=i(e,function(t){return t.tagName&&"FIGURE"===t.tagName.toUpperCase()});if(n){for(var o,a=n.parentNode,l=n.parentNode.childNodes,s=l.length,h=0,u=0;s>u;u++)if(1===l[u].nodeType){if(l[u]===n){o=h;break}h++}return o>=0&&r(o,a,null,null),!1}},o=function(){var t=window.location.hash.substring(1),e={};if(t.length<5)return e;for(var i=t.split("&"),n=0;n<i.length;n++)if(i[n]){var o=i[n].split("=");o.length<2||(e[o[0]]=o[1])}return e.gid&&(e.gid=parseInt(e.gid,10)),e},r=function(t,i,n,o){var r,a,l,s=document.querySelectorAll(".pswp")[0];if(l=e(i),a={galleryUID:i.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(t){var e=l[t].el.getElementsByTagName("img")[0],i=window.pageYOffset||document.documentElement.scrollTop,n=e.getBoundingClientRect();return{x:n.left,y:n.top+i,w:n.width}}},o)if(a.galleryPIDs){for(var h=0;h<l.length;h++)if(l[h].pid==t){a.index=h;break}}else a.index=parseInt(t,10)-1;else a.index=parseInt(t,10);isNaN(a.index)||(n&&(a.showAnimationDuration=0),r=new PhotoSwipe(s,PhotoSwipeUI_Default,l,a),r.init())},a=document.querySelectorAll(t),l=0,s=a.length;s>l;l++)a[l].setAttribute("data-pswp-uid",(l+1).toString()),a[l].onclick=n;var h=o();h.pid&&h.gid&&r(h.pid,a[h.gid-1],!0,!0)};initPhotoSwipeFromDOM(".my-gallery");var PhotoSwipeLoad;!function(t){var e=function(){function t(t,e,i){var n=this;this.gid=t,this.galleryOptions=e,this.callback=i,this.EphotoGalleryPhotoSizes={240:"m",320:"n",640:"z",800:"c",1024:"b",1600:"h",2048:"k",2400:"o"},this.currentSize=parseInt(Object.keys(this.EphotoGalleryPhotoSizes)[0],10),this.firstResize=!0,this.initGalleryWithCallback=function(t){return t=t||function(){},n.EphotoGalleryData&&n.galleryOptions?(n.gallery||n.initGallery(n.EphotoGalleryData,n.galleryOptions),void t(n.gallery)):"You have to initialize everything."},this.initGallery=function(t,e){var i=document.querySelectorAll(".pswp")[0],o=new PhotoSwipe(i,PhotoSwipeUI_Default,t,e);o.listen("beforeResize",function(){var t=0,e=!1,i=o.viewportSize.x*window.devicePixelRatio;for(var r in n.EphotoGalleryPhotoSizes)i>r&&(t=parseInt(r,10));n.currentSize<t&&(e=!0,n.currentSize=t),e&&!n.firstResize&&o.invalidateCurrItems(),n.firstResize=!1}),o.listen("gettingData",function(t,e){var i=n.EphotoGalleryPhotoSizes[n.currentSize];e.src=e.sizeData[i].src||e.o.src,e.w=e.sizeData[i].w||e.o.w,e.h=e.sizeData[i].h||e.o.h}),o.listen("destroy",function(){n.gallery=void 0}),n.gallery=o},this.init=function(){var t=n.EphotoGalleryPhotoSizes;if(n.galleryOptions=n.galleryOptions||{},"getImageURLForShare"in n.galleryOptions||(n.galleryOptions.getImageURLForShare=function(t){return this.gallery.currItem.original_src||this.gallery.currItem.src||""}),n.callback=n.callback||function(){},n.EphotoGalleryData)n.initGallery(n.EphotoGalleryData,n.galleryOptions),n.callback(n.gallery);else{var e="Data/"+(n.gid||1).toString();$.get(e,function(e){var i,o=[];for(i in e){var r,a,l=e[i],s={src:"",w:0,h:0,sizeData:{}};for(r in t){a=t[r];var h=l.heightRatio<=1?parseFloat(r):parseFloat(r)*l.heightRatio,u=l.heightRatio>1?parseFloat(r):parseFloat(r)*l.heightRatio;s.sizeData[a]={src:l.uri.replace("_o","_"+a),w:h,h:u},s.original_src=l.uri.replace("_o","")}o.push(s)}n.EphotoGalleryData=o,n.initGallery(n.EphotoGalleryData,n.galleryOptions),n.callback(n.gallery)})}},this.init()}return t}();t.PhotoSwipeLoad=e}(PhotoSwipeLoad||(PhotoSwipeLoad={}));var PhotoSwipeRun;!function(t){var e=function(){function t(){this.onload=function(){var t,e=[],i=document.URL.split("#")[1];if(void 0!=i)for(var n=i.split("&"),o=0;o<n.length;o++)t=n[o].split("="),e.push(t[1]),e[t[0]]=t[1];var r,a=e.gid?e.gid:"1",l=document.getElementById("reopenGallery"),s={index:0,counterEl:!1},h=function(t){t.listen("close",function(){r=t.getCurrentIndex()}),t.init(),r&&t.goTo(r),l.style.display=""},u=new PhotoSwipeLoad.PhotoSwipeLoad(a,s,h);l.addEventListener("click",function(){u.initGalleryWithCallback(h)})},"loading"!=document.readyState?this.onload():document.addEventListener("DOMContentLoaded",this.onload)}return t}();t.PhotoSwipeRun=e}(PhotoSwipeRun||(PhotoSwipeRun={})),new PhotoSwipeRun.PhotoSwipeRun;